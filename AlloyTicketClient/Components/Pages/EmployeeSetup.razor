@using Microsoft.AspNetCore.Authorization
@inject IConfiguration Configuration

@page "/"
@attribute [Authorize]
@rendermode InteractiveServer

<PageTitle>Employee Setup</PageTitle>

<div class="employee-setup-container">
    <h1 class="employee-setup-title">Employee Setup</h1>
    <div class="employee-setup-subtitle">
        Would you like to add a new employee or remove an existing employee?
    </div>
    <div class="employee-setup-help">
        <em>(for all other user requests, please contact the Help Desk.)</em>
    </div>
    <div class="employee-setup-buttons">
        <button class="employee-btn add-btn" @onclick="ShowAddNew">Add Hire</button>
        <button class="employee-btn remove-btn" @onclick="ShowRemoveExisting">Terminate Hire</button>
    </div>
</div>

<EmployeeSlideOver Show="showSlideOver"
                   Title="@slideOverTitle"
                   FormId="@slideOverFormId"
                   OnClose="CloseSlideOver" />

@code {
    private bool showSlideOver = false;
    private string? slideOverTitle;
    private string? slideOverFormId;

    private void ShowAddNew()
    {
        slideOverTitle = "New Hire Request";
        slideOverFormId = Configuration["EmployeeActions:NewHireFormId"];
        showSlideOver = true;
    }

    private void ShowRemoveExisting()
    {
        slideOverTitle = "Terminate User Request";
        slideOverFormId = Configuration["EmployeeActions:TerminateHireFormId"];
        showSlideOver = true;
    }

    private void CloseSlideOver()
    {
        showSlideOver = false;
        slideOverTitle = null;
        slideOverFormId = null;
    }
}
